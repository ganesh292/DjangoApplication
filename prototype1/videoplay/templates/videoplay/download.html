{% extends "videoplay/base.html"%}
{% load static %}
{% block content %}
 <script type="text/javascript" src="{% static 'videoplay/jszip.js' %}"></script>
 <script type="text/javascript" src="{% static 'videoplay/jszip.min.js' %}"></script>
 <script type="text/javascript" src="{% static 'videoplay/FileSaver.js' %}"></script>
 <script>
  var objs = '{{urls}}'.split(',');

  /*function clickdownload(){
    var interval = setInterval(ondownload, 300,objs);
    if (objs.length == 0) {
        clearInterval(interval);
        return;
      }
  }
 
    function ondownload(objs){
      if (objs.length == 0) {
        return;
      }
 
      var url = objs.pop();
      console.log(url)
 
      var a = document.createElement("a");
      a.setAttribute('href',  url);
      a.setAttribute('download', '');
      a.setAttribute('target', '_blank');
      a.click();
     }*/
 //for creating zip folder
 function createZip()
{
var zip = new JSZip();

// Add an top-level, arbitrary text file with contents
//zip.file("Hello.txt", "Hello World\n");

// Generate a directory within the Zip file structure
var video = zip.folder("videos");
// Add a file to the directory, in this case an image with data URI as contents
for(var i =0;i<objs.length;i++)
{
var f = "Access-Control-Allow-Origin:" + objs[i];

$.get(f,function(data, status){
      alert("Data: " + data + "\nStatus: " + status);     
})

// video.file(f, {binary:true});
console.log(f);
console.log(video);
}

// Generate the zip file asynchronously
zip.generateAsync({type:"Blob"})
.then(function(content) {
// Force down of the Zip file
saveAs(content, "videos.zip");
});
}
 
 </script> 
 
 <div class="container fluid">
    <div class="row">
      <div class="col text-center">
                                  
                                    <h1 class="display-4 text-white">Welcome!</h1>
                                    <p class="lead text-muted">Thank you for your participation!</p>
                                    <hr class="my-4 text-center">


                                    
                                    <div class="list-group text-left text-white">
                                    <ol>
                                    <li> As Step one download the videos using download button given below</li>
                                    <li>Once Videos are Downloaded click "Start Watching" and provide the location to the downloaded videos by clicking the "Select Videos" button on the next page</li>
                                    <li>The Study comprises in total of 20 Videos,Pause the video at any moment you want to take a break.</li>
                                    <li>At the end of each video enter your rating from scale of 1-10</li>
                                    <li>Study will end only when ratings are given to all the videos</li>

                                   </ol>
                                
                                </div>
                                    {% if user.is_authenticated %}
   
                                    <br>

                                    <button type="button" id="downloadButton" class="btn btn-primary btn-md" style="width:100%;border-color:gray;background-color:black;border-width:2px " onclick ="clickdownload()"><i class="fa fa-download"></i> Download Your Personalized Videos for the Ratings</button>


                                        <br/>
                                        <br/>
                                          <br/>

                                            <br/>
                                          <a href="{% url 'videoplay-videos' %}"><button type="button" id="startButton" class="btn btn-primary btn-md" style="border-color:gray;background-color:black;" disabled=true>Start Watching <i2 class="arrow right"></i2></button></a>
                                          


                                    {% else %}
                                      <div>
                                          <b>Need an Account?  </b>
                                          <p></p>
                                          <a  class="btn btn-primary btn-md" href="{%url 'register'%}" role="button">Sign Up!</a>
                                          <br>
                                          <br>
                                          <b>Already have an Account?  </b>
                                          <p></p>
                                          <a class="btn btn-success btn-md" href="{%url 'login'%}" role="button">Login!</a>
                                    {% endif %}
                                  </div>
                              </div>
                            </div>
                          </div>
                </div>


  {%endblock content%}
 
