{% extends "videoplay/base.html"%}
{% load static %}
{% block content %}
                    <div class="container fluid">
                            <div class="row">
                              <div class="col text-center">
                                <input type="file" onchange="readFiles(event)" multiple>
                                <video id="myVideo" width="75%" height="100%" controls>
                                      <source src = "" type="video/mp4">
                                       Your browser does not support HTML5 video.
                                </video>
                                <br/>
                                <br/>
                                 <button type="button" onclick="playVid()" class="btn btn-primary btn-md">Play Video</button>
                                 <button type="button" onclick="pauseVid()" class="btn btn-secondary btn-md">Pause Video</button>
                                 <div class="slidecontainer">
                                   <input type="range" min="1" max="100" value="50" class="slider" id="myRange" disabled>
                                   <p style="color: yellow;">Score: <span id="demo"></span></p>
                                 </div>
                                 <button type="button" onclick="nextVid()" class="btn btn-success btn-md">Submit Score</button>
                                 <!-- <button type="button" onclick="nextVid()" class="btn btn-success btn-md">Next Video</button> -->
                              </div>
                            </div>
                          </div>

<style>
  .slidecontainer {
    width: 50%;
    margin: 0 auto;
    padding: 1.8% 1.8%;

  }
  #demo{
    color: yellow;
  }

  .slider {
    -webkit-appearance: none;
    width: 100%;
    height: 25px;
    background: #d3d3d3;
    outline: none;
    opacity: 0.2;
    -webkit-transition: .2s;
    transition: opacity .2s;
  }

  .slider:hover {
    opacity: 1;
  }

  .slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 25px;
    height: 25px;
    background: blue;
    cursor: pointer;
  }

  .slider::-moz-range-thumb {
    width: 25px;
    height: 25px;
    background: #4CAF50;
    cursor: pointer;
  }
</style>

<script type="text/javascript">
  var slider = document.getElementById("myRange");
  var output = document.getElementById("demo");
  var fileList;
  var i=0;
  function readFiles(event) {
      fileList = event.target.files;
      loadAsUrl(fileList[i]);

  }
  output.innerHTML = slider.value;
  slider.oninput = function() {
    output.innerHTML = this.value;
    score=this.value;
  }

  function loadAsUrl(theFile) {
      var reader = new FileReader();

      reader.onload = function(loadedEvent) {
          //playVid();
          var vid = document.getElementById("myVideo");
          vid.setAttribute("src", loadedEvent.target.result);
          vid.addEventListener('ended',myHandler,false);
          function myHandler(e) {
                 slider.style.opacity=0.8;
                 slider.disabled=false;
          }
      }

      reader.readAsDataURL(theFile);
  }

  function nextVid(){
    i++;
    if(i==3){
      i=0;
    }
    loadAsUrl(fileList[i]);
    slider.value=50;
    output.innerHTML=50;
  }
</script>





{% endblock content %}
